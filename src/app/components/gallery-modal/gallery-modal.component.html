<div class="modal-container" *ngIf="isModalOpen">
  <div class="modal-wrapper">
    <div class="modal-box">
      <div class="title">
        <div class="modal-close-button">
          <div class="close-modal">
            <tui-svg (click)="closeModal()"
                     src="tuiIconCloseLarge"
                     class=" icon"
            ></tui-svg>
          </div>
        </div>
        <h4 class="title-style">
          <span>Add to Gallery</span>
        </h4>
      </div>


      <div class="gallery-list" #scrollContainer (scroll)="onScroll()" *ngIf="galleries$ | async as galleries">
        <div class="modal-button" *ngIf="!createNewGallery">
          <div class="add-button " (click)="openNewGalleyDialog()">
            <button>
              <tui-svg
                src="tuiIconPlusLarge"></tui-svg>
              <span>Create new Gallery</span>
            </button>
          </div>
        </div>

        <div class="add-new-gallery" *ngIf="createNewGallery">
          <p>
            Create new Gallery
          </p>

          <form [formGroup]="form">
            <div class="element-input-wrapper">
              <label for="title-input">Title</label>
              <input type="text" id="title-input" name="title" formControlName="nameGallery">
            </div>

            <div class="check-box-wrapper">
              <input class="regular-checkbox" type="checkbox"  formControlName="isChecked"
              >
              <span>Private</span>
            </div>
          </form>

          <div class="actions">
            <button (click)="cancelCreate()" class="cancel-button">Cancel</button>
            <button [disabled]="this.form.invalid" (click)="createGallery()"
                    class="post-button">
              Create and add
            </button>
          </div>
        </div>

        <hr class="border">


        <div class="modal-search">
          <tui-input

            tuiTextfieldIconLeft="tuiIconSearchLarge"

            (input)="searchMethod()"
            [(ngModel)]="searchValue">

            Search
            <input tuiTextfield/>
          </tui-input>

        </div>
        <div class="infinite-scroll">
          <div class="item" *ngFor="let gallery of galleries" (click)="changeGallery(gallery)">
            <img *ngIf="gallery.images.length>0" [src]="gallery.images[0].imageUrl">

            <div class="gallery-photo" *ngIf="gallery.images.length==0">
              <tui-svg
                  src="tuiIconCameraOffLarge"></tui-svg>
            </div>
            <p>
              {{gallery.name}}
            </p>

            <tui-svg *ngIf="gallery.isPrivate"
                     src="tuiIconLock"></tui-svg>
            <tui-svg *ngIf="checkImage(gallery.images)"
                     style="margin-left: auto;margin-right: 0;flex: 0 0 32px;color: rgb(8,112,209)"
                     src="tuiIconCheckLarge"></tui-svg>
          </div>


        </div>


      </div>


    </div>


  </div>


</div>
